<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Torque3D - Engine Reference: Script Auto-Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Torque3D - Engine Reference
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Script Auto-Documentation<div class="ingroups"><a class="el" href="group__console__system.html">Console System</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for Script Auto-Documentation:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__script__autodoc.png" border="0" alt="" usemap="#group____script____autodoc"/>
<map name="group____script____autodoc" id="group____script____autodoc">
<area shape="rect" id="node2" href="group__console__system.html" title="Console System" alt="" coords="5,5,124,32"/>
</map>
</td></tr></table></center>
</div>
<h1><a class="anchor" id="script_autodoc_using"></a>
Using Script Auto-Documentation</h1>
<p>There are on the order of three hundred functions exposed to the script language through the console. It is therefore extremely important that they be documented, but due to their number, it is difficult to maintain a seperate reference document.</p>
<p>Therefore, a simple documentation system has been built into the scripting engine. It was initially added by Mark Frohnmayer, and later enhanced by Ben Garney. The scripting engine supports grouping functions and methods, to help organize the several hundred functions, as well as associating a "usage string" with functions and groups.</p>
<dl class="section note"><dt>Note</dt><dd>The results of a console doc dump will vary depending on when you run it. If you run it, for example, while in the game menu, it won't output any data for the script-defined classes which are defined for gameplay. To get comprehensive documentation, you may need to write a special script that will get all your classes loaded into the scripting engine.</dd></dl>
<p>The script documentation system is designed to output a dump of the current state of the scripting engine in a format understandable by Doxygen. It does this by traversing the namespace/class hierarchy in memory at the time of the dump, and outputting psuedo-C++ code equivalent to this class hierarchy.</p>
<h2><a class="anchor" id="script_autodoc_using_script"></a>
For the Scripter...</h2>
<p>Currently, there is no way to associate usage strings or other documentation with script code like you can with C++ code.</p>
<p>You can get a list of all the methods and fields of an object from any object which inherits from <a class="el" href="class_sim_object.html">SimObject</a> (ie, every object), as well as the documentation on those objects by using the dump() method from the console:</p>
<div class="fragment"><div class="line">==&gt;$foo = <span class="keyword">new</span> <a class="code" href="class_sim_object.html">SimObject</a>();</div><div class="line">==&gt;$foo.dump();</div><div class="line">Member Fields:</div><div class="line">Tagged Fields:</div><div class="line">Methods:</div><div class="line">  <span class="keyword">delete</span>() - obj.delete()</div><div class="line">  dump() - obj.dump()</div><div class="line">  getClassName() - obj.getClassName()</div><div class="line">  getGroup() - obj.getGroup()</div><div class="line">  getId() - obj.getId()</div><div class="line">  getName() - obj.getName()</div><div class="line">  getType() - obj.getType()</div><div class="line">  save() - obj.save(fileName, &lt;selectedOnly&gt;)</div><div class="line">  schedule() - <span class="keywordtype">object</span>.schedule(time, command, &lt;arg1...argN&gt;);</div><div class="line">  setName() - obj.setName(newName)</div></div><!-- fragment --><p>In the Torque example app, there are two functions defined in common\client\scriptDoc.cs which automate the process of dumping the documentation. They make use of the <a class="el" href="class_console_logger.html">ConsoleLogger</a> object to output the documentation to a file, and look like this:</p>
<dl class="section note"><dt>Note</dt><dd>You may want to add this code, or code like it, to your project if you have rewritten the script code in common.</dd></dl>
<div class="fragment"><div class="line"><span class="comment">// Writes out all script functions to a file</span></div><div class="line"><span class="keyword">function</span> writeOutFunctions() {</div><div class="line">   <span class="keyword">new</span> <a class="code" href="class_console_logger.html">ConsoleLogger</a>( logger, <span class="stringliteral">&quot;ConsoleFunctions.txt&quot;</span>, <span class="keyword">false</span> );</div><div class="line">   dumpConsoleFunctions();</div><div class="line">   logger.delete();</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// Writes out all script classes to a file</span></div><div class="line"><span class="keyword">function</span> writeOutClasses() {</div><div class="line">   <span class="keyword">new</span> <a class="code" href="class_console_logger.html">ConsoleLogger</a>( logger, <span class="stringliteral">&quot;scriptClasses.txt&quot;</span>, <span class="keyword">false</span> );</div><div class="line">   dumpConsoleClasses();</div><div class="line">   logger.delete();</div><div class="line">}</div></div><!-- fragment --><h2><a class="anchor" id="script_autodoc_using_coder"></a>
For the C++ Coder...</h2>
<dl class="section note"><dt>Note</dt><dd><b>It is of the utmost important that you keep your usage strings up to date!</b> Usage strings are the only way that a scripter has to know how to use the methods, functions, and variables you expose. Misleading, missing, or out of date documentation will make their lives much harder - and yours, too, because you'll have to keep explaining things to them! So make everyone's lives easier - keep your usage strings clear, concise, and up to date.</dd></dl>
<p>There are four types of items which can be documented using the autodocumentation system:</p><ul>
<li><b>Fields</b>, which are defined using the addField() calls. They are documented by passing a string to the usage parameter.</li>
<li><b>Field groups</b>, which are defined using the beginGroup() and endGroup() calls. They are documented by passing a descriptive string to the usage parameter.</li>
<li><b>Method groups</b>, which are defined using beginCommandGroup(), endCommandGroup(), ConsoleMethodGroupEnd(), ConsoleMethodGroupBegin(), ConsoleFunctionGroupEnd(), and ConsoleFunctionGroupBegin().</li>
<li><b>Methods and functions</b>, which are defined using either SimObject::addCommand(), the ConsoleMethod() macro, or the ConsoleFunction() macro. Methods and functions are special in that the usage strings should be in a specific format, so that parameter information can be extracted from them and placed into the Doxygen output.</li>
</ul>
<p>You can use standard Doxygen commands in your comments, to make the documentation clearer. Of particular use are @returns, @param, @note, and @deprecated.</p>
<p><b>Examples using global definitions.</b></p>
<div class="fragment"><div class="line"><span class="comment">// Example of using Doxygen commands.</span></div><div class="line">ConsoleFunction(alxGetWaveLen, S32, 2, 2, <span class="stringliteral">&quot;(string filename)&quot;</span></div><div class="line">                <span class="stringliteral">&quot;Get length of a wave file\n\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;@param filename File to determine length of.\n&quot;</span></div><div class="line">                <span class="stringliteral">&quot;@returns Length in milliseconds.&quot;</span>)</div><div class="line"></div><div class="line"><span class="comment">// A function group...</span></div><div class="line">ConsoleFunctionGroupBegin(Example, &quot;This is an example group! Notice that the name for the group&quot;</div><div class="line">                                   &quot;must be a valid identifier, due to limitations in the C preprocessor.&quot;);</div><div class="line"></div><div class="line"><span class="comment">// ConsoleFunction definitions go here.</span></div><div class="line"></div><div class="line">ConsoleFunctionGroupEnd(Example);</div><div class="line"></div><div class="line"><span class="comment">// You can do similar things with methods...</span></div><div class="line">ConsoleMethodGroupBegin(<a class="code" href="class_sim_set.html">SimSet</a>, UsefulFuncs, &quot;Here are some useful functions involving a SimSet.&quot;);</div><div class="line">ConsoleMethod(SimSet, listObjects, <span class="keywordtype">void</span>, 2, 2, &quot;set.listObjects();&quot;)</div><div class="line">ConsoleMethodGroupEnd(SimSet, UsefulFuncs, &quot;Here are some more useful functions involving a SimSet.&quot;);</div></div><!-- fragment --><p><b>Examples using addField</b></p>
<dl class="section note"><dt>Note</dt><dd>Using addCommand is strongly deprecated.</dd></dl>
<div class="fragment"><div class="line"><span class="comment">// Example of a field group.</span></div><div class="line">addGroup( <span class="stringliteral">&quot;Logging&quot;</span>, <span class="stringliteral">&quot;Things relating to logging.&quot;</span> );</div><div class="line">addField( <span class="stringliteral">&quot;level&quot;</span>,   TYPEID&lt; ConsoleLogLevel &gt;(),     Offset( mLevel,    <a class="code" href="class_console_logger.html">ConsoleLogger</a> ) );</div><div class="line">endGroup( <span class="stringliteral">&quot;Logging&quot;</span> );</div></div><!-- fragment --><h1><a class="anchor" id="script_autodoc_makingdocs"></a>
How to Generate Script Docs</h1>
<p>Script docs can be generated by running the dumpConsoleFunctions() and dumpConsoleClasses(), then running the output through Doxygen. There is an example Doxygen configuration file to do this at doc\doxygen\html\script_doxygen.html.cfg. Doxygen will parse the psuedo-C++ generated by the console doc code and produce a class hierarchy and documentation of the global namespace. You may need to tweak the paths in the configuration file slightly to reflect your individual setup.</p>
<h1><a class="anchor" id="script_autodoc_internals"></a>
Script Auto-Documentation Internals</h1>
<p>The consoleDoc system works by inserting "hidden" entries in <a class="el" href="class_namespace.html">Namespace</a> and <a class="el" href="class_abstract_class_rep.html">AbstractClassRep</a>; these hidden entries are assigned special type IDs so that they aren't touched by the standard name resolution code. At documentation creation time, the dumpConsole functions iterate through the <a class="el" href="class_namespace.html">Namespace</a> hierarchy and the <a class="el" href="class_abstract_class_rep.html">AbstractClassRep</a> data and extract this "hidden" information, outputting it in a Doxygen-compatible format.</p>
<dl class="section note"><dt>Note</dt><dd>You can customize the output of the console documentation system by modifying these functions:<ul>
<li>printClassHeader()</li>
<li>printClassMethod()</li>
<li>printGroupStart()</li>
<li>printClassMember()</li>
<li>printGroupEnd()</li>
<li>printClassFooter()</li>
</ul>
</dd>
<dd>
There was once support for 'overloaded' script functions; ie, script functions with multiple usage strings. Certain functions in the audio library used this. However, it was deemed too complex, and removed from the scripting engine. There are still some latent traces of it, however. </dd></dl>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
